<!DOCTYPE html>
<html>
  <head>
    <title>Peter Music Downloader</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="css/pmd.css" rel="stylesheet" media="screen">
  </head>
  <body>

    <!-- Navbar
    ================================================== -->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="#">PMD</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="">
                <a href="./index.html">Home</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    

    <div id="content" class="container">  	
	    <h1>Hello, Peter!</h1>

		<div class="navbar">
			<div class="navbar-inner">
				<form id="searchForm" class="navbar-form pull-left">
					<input type="text" class="search-query" placeholder="Search">
					<button type="submit" class="btn">Buscar</button>
				</form>
			</div>
     	</div>
  	</div>
  	
  	
  	
  	<div id="songList" class="container">
  		<button id="downloadButton" type="button" class="btn btn-default">Download Selected</button>
		<table class="table table-bordered table-striped">
			<thead>
			  <tr>
			  	<th><input id="checkAll" type="checkbox"></th>
			    <th>Song</th>
			    <th>Artist</th>
			    <th>Quality</th>
			  </tr>
			</thead>
			<tbody>
			</tbody>  
		</table>        
  	</div>
  	
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="js/app.util.js"></script>
    <script src="js/bootstrap.min.js"></script>
    
    
    <script type="text/javascript">
    	$(function() {
    		
    		$('#checkAll').click(function() {
    			if ($(this).is(":checked")) {
    				console.log('checked')
    				$('input:checkbox').attr('checked', true);
    			} else {
    				$("input:checkbox").removeAttr('checked');
    				//$('input:checkbox').attr('checked', false);
    			}
    			
    		});
    		
    		$('#downloadButton').click(function(e) {
    			console.log('entra '+$('input[class=check-song]:checked').length);
    			$('input[class=check-song]:checked').each(function(index, obj) {
    				var data = $(obj).data('data');
    				console.log(data);
    				downloadSong(data);
    			    //selected.push($(this).attr('name'));
    			});
    			e.preventDefault();
    		});
    		
    		$('#searchForm').on('submit', function(e) {
    			var query = $(this).find('input').val();
    			if (query.trim()) {
    				searchSongs(query);
    			}
    			e.preventDefault();
    		});
		});
    	</script>
  </body>
</html>